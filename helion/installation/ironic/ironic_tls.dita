<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="ironic-tls">
    <title><ph conkeyref="HOS-conrefs/product-title"/>TLS Certificates with Ironic Python Agent (IPA) Images</title>
    
    <body>
        <p conkeyref="HOS-conrefs/applies-to"/>
        
        <p>As part of HOS, Ironic Python Agent, better known as IPA in the OpenStack community, images are supplied and loaded into glance.  Two types of image exist.  One is a traditional boot ramdisk which is used the agent_ipmitool, pxe_ipmitool, and pxe_ilo drivers.  The other is an ISO image that is supplied as virtual media to the host when using the agent_ilo driver.
            
            As these images are built in advance, they are unaware of any private certificate authorities.  Users attempting to utilize self signed certificates or a private certificate authority will need to inject their signing certificate(s) into the image in order for IPA to be able to boot on a remote node, and ensure that the TLS endpoints being connected to in HOS can be trusted.  This is not an issue with publicly signed certificates.
            
            As two different types of images exist, below are instructions for disassembling the image ramdisk file or ISO image.  Once this has been done, you will need to re-upload the files to glance, and update any impacted node's driver_info, example being the deploy_ramdisk and ilo_deploy_iso settings that were set when the node was first defined.  Respectively, 
            This can be done with the `ironic node-update &lt;node> replace driver_info/deploy_ramdisk=&lt;glance_id>` or `ironic node-update &lt;node> replace driver_info/ilo_deploy_iso=&lt;glance_id>`
        </p>
        
        
    </body>
    
</topic>

